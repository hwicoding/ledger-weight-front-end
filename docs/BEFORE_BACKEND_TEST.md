# 🔧 백엔드 테스트 전 필수 작업 목록

## 📋 개요

백엔드와 실제 연동 테스트를 하기 전에 프론트엔드에서 준비해야 할 사항들을 정리했습니다.

---

## 🔴 필수 작업 (반드시 필요)

### 1. WebSocket URL 설정 관리 ⭐⭐⭐⭐⭐

**현재 문제:**
- WebSocket URL이 하드코딩되어 있음 (`ws://localhost:8080`)
- 개발/프로덕션 환경 전환이 어려움
- 백엔드 서버 주소 변경 시 코드 수정 필요

**필요한 작업:**
- [ ] **환경 변수 또는 설정 파일 생성**
  - 개발 환경: `ws://localhost:8080`
  - 프로덕션 환경: 실제 서버 URL
  - Expo의 `app.config.js` 또는 별도 설정 파일 사용

- [ ] **설정 파일 생성** (`src/config/websocket.ts`)
  ```typescript
  export const WEBSOCKET_CONFIG = {
    baseUrl: process.env.EXPO_PUBLIC_WS_URL || 'ws://localhost:8080',
    reconnectAttempts: 5,
    reconnectDelay: 1000,
  };
  ```

- [ ] **LobbyViewModel에서 설정 사용**
  - 하드코딩된 URL 제거
  - 설정 파일에서 URL 가져오기

---

### 2. 로딩 상태 표시 UI ⭐⭐⭐⭐

**현재 문제:**
- `isConnecting` 상태는 있지만 UI에 표시되지 않음
- 사용자가 진행 상황을 알 수 없음

**필요한 작업:**
- [ ] **로비 참가 중 로딩 인디케이터**
  - `ActivityIndicator` 추가
  - "연결 중..." 텍스트와 함께 표시

- [ ] **게임 상태 업데이트 중 로딩 표시**
  - 게임 상태 수신 중 표시
  - 업데이트 완료 시 숨김

- [ ] **카드 사용 중 로딩 상태**
  - 카드 사용 버튼 비활성화
  - 로딩 인디케이터 표시

---

### 3. 에러 메시지 표시 개선 ⭐⭐⭐⭐

**현재 문제:**
- 에러가 `alert()`로만 표시됨
- 사용자 친화적이지 않음
- 에러 메시지가 사라지지 않음

**필요한 작업:**
- [ ] **에러 표시 컴포넌트 생성**
  - Toast 또는 Snackbar 형태
  - 자동으로 사라지는 알림
  - 에러 타입별 색상 구분

- [ ] **에러 메시지 개선**
  - 기술적인 에러를 사용자 친화적으로 변환
  - 해결 방법 제시

- [ ] **에러 복구 옵션 제공**
  - 재시도 버튼
  - 연결 재시도 기능

---

### 4. 연결 상태 표시 개선 ⭐⭐⭐

**현재 문제:**
- 연결 상태가 단순 텍스트로만 표시됨
- 연결 끊김 시 명확한 표시 없음

**필요한 작업:**
- [ ] **연결 상태 인디케이터**
  - 연결됨: 초록색 점
  - 연결 중: 노란색 점
  - 연결 끊김: 빨간색 점

- [ ] **연결 끊김 알림**
  - 연결이 끊겼을 때 명확한 알림
  - 재연결 시도 옵션

---

### 5. 네트워크 에러 처리 ⭐⭐⭐

**현재 문제:**
- 네트워크 에러 시 기본 에러만 표시
- 재연결 로직이 있지만 사용자에게 알림 없음

**필요한 작업:**
- [ ] **네트워크 상태 감지**
  - 네트워크 연결 여부 확인
  - 오프라인 상태 표시

- [ ] **재연결 시도 UI**
  - 재연결 시도 중 표시
  - 재연결 실패 시 명확한 메시지

- [ ] **타임아웃 처리**
  - 연결 타임아웃 설정
  - 타임아웃 시 사용자 알림

---

## 🟡 권장 작업 (있으면 좋음)

### 6. 입력 검증 개선

- [ ] **게임 ID 유효성 검증**
  - 빈 값 체크
  - 형식 검증 (필요시)

- [ ] **플레이어 이름 유효성 검증**
  - 빈 값 체크
  - 최소/최대 길이 체크
  - 특수 문자 제한 (필요시)

### 7. 디버깅 도구

- [ ] **WebSocket 메시지 로깅**
  - 전송/수신 메시지 로그
  - 개발 모드에서만 활성화

- [ ] **연결 상태 모니터링**
  - 연결 상태 실시간 표시
  - 마지막 메시지 수신 시간 표시

### 8. 사용자 경험 개선

- [ ] **자동 재연결 옵션**
  - 사용자가 재연결 여부 선택 가능
  - 자동 재연결 설정 저장

- [ ] **연결 실패 시 안내**
  - 문제 해결 방법 제시
  - 서버 상태 확인 안내

---

## 📝 구현 우선순위

### Phase 1: 필수 (백엔드 테스트 전 반드시)
1. ✅ WebSocket URL 설정 관리
2. ✅ 로딩 상태 표시 UI
3. ✅ 에러 메시지 표시 개선

### Phase 2: 중요 (테스트 중 개선)
4. ✅ 연결 상태 표시 개선
5. ✅ 네트워크 에러 처리

### Phase 3: 개선 (테스트 후)
6. 입력 검증 개선
7. 디버깅 도구
8. 사용자 경험 개선

---

## 🎯 체크리스트

백엔드 테스트를 시작하기 전에 다음 항목들을 확인하세요:

- [ ] WebSocket URL이 설정 파일에서 관리됨
- [ ] 로딩 상태가 UI에 표시됨
- [ ] 에러 메시지가 사용자 친화적으로 표시됨
- [ ] 연결 상태가 명확하게 표시됨
- [ ] 네트워크 에러가 적절히 처리됨
- [ ] 재연결 로직이 작동함
- [ ] 입력 검증이 작동함

---

**마지막 업데이트**: 2025-12-12

