# λ°±μ—”λ“ λ‹΄λ‹Ήμ κ³µμ΅° λ©”μΌ μ΄μ•

---

## μ λ©: [ν”„λ΅μ νΈλ…] ν”„λ΅ νΈμ—”λ“-λ°±μ—”λ“ μ—°λ™ ν‘μ μ”μ²­

---

μ•λ…•ν•μ„Έμ”, λ°±μ—”λ“ λ‹΄λ‹Ήμλ‹.

ν”„λ΅ νΈμ—”λ“ κ°λ°μ΄ μΌμ • μμ¤€ μ§„ν–‰λμ–΄ λ°±μ—”λ“μ™€μ μ—°λ™ ν…μ¤νΈλ¥Ό μ¤€λΉ„ν•κ³  μμµλ‹λ‹¤. 
μ›ν™ν• ν‘μ—…μ„ μ„ν•΄ ν„μ¬ ν”„λ΅ νΈμ—”λ“ μƒνƒμ™€ ν•„μ”ν• μ‚¬ν•­μ„ κ³µμ λ“λ¦½λ‹λ‹¤.

---

## π“‹ ν„μ¬ ν”„λ΅ νΈμ—”λ“ μ™„λ£ μƒνƒ

### β… μ™„λ£λ μ‘μ—…

1. **κΈ°λ³Έ μ•„ν‚¤ν…μ² κµ¬μ¶•**
   - Clean Architecture (Domain, Application, Infrastructure, Presentation)
   - MVVM ν¨ν„΄ μ μ©
   - Redux Toolkit μƒνƒ κ΄€λ¦¬

2. **UI κµ¬ν„ μ™„λ£**
   - λ΅λΉ„ ν™”λ©΄ (LobbyScreen)
   - κ²μ„ ν™”λ©΄ (GameScreen)
   - ν”λ μ΄μ–΄ λ©λ΅ ν‘μ‹
   - νƒ€κ²ν… μ‹μ¤ν… UI
   - κ²μ„ μ΄λ²¤νΈ λ΅κ·Έ UI
   - λ΅λ”© μƒνƒ ν‘μ‹ (LoadingIndicator)
   - μ—λ¬ λ©”μ‹μ§€ ν‘μ‹ (Toast)

3. **WebSocket ν΄λΌμ΄μ–ΈνΈ κµ¬ν„**
   - WebSocket μ—°κ²°/μ¬μ—°κ²° λ΅μ§
   - λ©”μ‹μ§€ μμ‹ /μ „μ†΅ μΈν„°νμ΄μ¤
   - μ—λ¬ μ²λ¦¬ λ° μ¬μ—°κ²° λ΅μ§

4. **κ²μ„ λ΅μ§ UseCase κµ¬ν„**
   - JoinLobbyUseCase (λ΅λΉ„ μ°Έκ°€)
   - UseCardUseCase (μΉ΄λ“ μ‚¬μ©)
   - EndTurnUseCase (ν„΄ μΆ…λ£)
   - RespondAttackUseCase (κ³µκ²© μ‘λ‹µ)

---

## π” WebSocket ν”„λ΅ν† μ½ μ •μ

### μ—°κ²° URL ν•μ‹

**λ΅λΉ„ μ—°κ²°:**
```
ws://[μ„λ²„μ£Όμ†]:[ν¬νΈ]/lobby/[gameId]?player=[playerName]
```

**κ²μ„ μ—°κ²° (ν•„μ”μ‹):**
```
ws://[κ²μ„μ£Όμ†]:[ν¬νΈ]/game/[gameId]?player=[playerId]
```

**ν„μ¬ μ„¤μ •:**
- κΈ°λ³Έ URL: `ws://localhost:8080` (ν™κ²½ λ³€μλ΅ λ³€κ²½ κ°€λ¥)
- μ¬μ—°κ²° μ‹λ„: 5ν
- μ¬μ—°κ²° μ§€μ—°: 1μ΄
- μ—°κ²° νƒ€μ„μ•„μ›ƒ: 10μ΄

---

## π“¨ λ©”μ‹μ§€ ν”„λ΅ν† μ½

### 1. ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„ (PLAYER_ACTION)

```typescript
{
  "type": "PLAYER_ACTION",
  "action": {
    "type": "USE_CARD" | "END_TURN" | "RESPOND_ATTACK",
    "cardId": "string (optional, USE_CARD μ‹ ν•„μ)",
    "targetId": "string (optional, USE_CARD μ‹ νƒ€κ² ν•„μ” μ‹ ν•„μ)",
    "response": "evade" | "give_up" (RESPOND_ATTACK μ‹ ν•„μ)
  }
}
```

**μ•΅μ… νƒ€μ…λ³„ μƒμ„Έ:**

#### USE_CARD
```json
{
  "type": "PLAYER_ACTION",
  "action": {
    "type": "USE_CARD",
    "cardId": "card-001",
    "targetId": "player-002"  // νƒ€κ²μ΄ ν•„μ”ν• μΉ΄λ“μΈ κ²½μ°
  }
}
```

#### END_TURN
```json
{
  "type": "PLAYER_ACTION",
  "action": {
    "type": "END_TURN"
  }
}
```

#### RESPOND_ATTACK
```json
{
  "type": "PLAYER_ACTION",
  "action": {
    "type": "RESPOND_ATTACK",
    "response": "evade"  // λλ” "give_up"
  }
}
```

---

### 2. μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ (GAME_STATE_UPDATE)

```typescript
{
  "type": "GAME_STATE_UPDATE",
  "gameId": "string",
  "players": [
    {
      "id": "string",
      "role": "string",  // "μ›λ΅μ›" | "μ λ„μ„Έλ ¥" | "μ•Όλ§κ°€" λ“±
      "hp": "number",
      "influence": "number",
      "treasures": "string[]",  // λ³΄λ¬Ό ID λ°°μ—΄
      "hand": [
        {
          "id": "string",
          "name": "string",
          "suit": "string",  // "λ‹¤μ΄μ•„λ¬λ“" | "ν•νΈ" | "ν΄λ½" | "μ¤νμ΄λ“"
          "rank": "string",  // "A" | "2" | "3" | ... | "K"
          "description": "string (optional)"
        }
      ],
      "tableCards": [  // ν•„λ“μ— λ‚΄λ ¤λ†“μ€ μΉ΄λ“ (optional)
        {
          "id": "string",
          "name": "string",
          "suit": "string",
          "rank": "string",
          "description": "string (optional)"
        }
      ]
    }
  ],
  "currentTurn": "string",  // ν„μ¬ ν„΄ ν”λ μ΄μ–΄ ID
  "turnState": {
    "currentTurn": "string",
    "timeLeft": "number",  // λ‚¨μ€ μ‹κ°„ (μ΄)
    "requiredResponse": {  // μ‘λ‹µμ΄ ν•„μ”ν• κ²½μ° (optional)
      "type": "RESPOND_ATTACK",
      "message": "string"
    }
  },
  "events": [  // μµκ·Ό κ²μ„ μ΄λ²¤νΈ λ΅κ·Έ
    {
      "id": "string",
      "timestamp": "number",  // Unix timestamp (λ°€λ¦¬μ΄)
      "message": "string",
      "type": "action" | "notification" | "error"
    }
  ],
  "phase": "lobby" | "playing" | "finished"
}
```

**μ°Έκ³ μ‚¬ν•­:**
- `hand` λ°°μ—΄: ν„μ¬ ν”λ μ΄μ–΄μ ν•Έλ“ μΉ΄λ“ (λ‹¤λ¥Έ ν”λ μ΄μ–΄μ ν•Έλ“λ” κ°μλ§ ν‘μ‹ κ°€λ¥)
- `tableCards`: ν•„λ“μ— λ‚΄λ ¤λ†“μ€ μΉ΄λ“ (λ¨λ“  ν”λ μ΄μ–΄μ—κ² κ³µκ°)
- `events`: μµκ·Ό 50κ° μ΄λ²¤νΈλ§ μ μ§€ (ν”„λ΅ νΈμ—”λ“μ—μ„)

---

### 3. μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ (ERROR)

```typescript
{
  "type": "ERROR",
  "message": "string",  // μ—λ¬ λ©”μ‹μ§€
  "code": "string (optional)"  // μ—λ¬ μ½”λ“
}
```

---

## π”„ λ©”μ‹μ§€ νλ¦„

### λ΅λΉ„ μ°Έκ°€ νλ¦„

1. **ν΄λΌμ΄μ–ΈνΈ**: WebSocket μ—°κ²° (`ws://localhost:8080/lobby/{gameId}?player={playerName}`)
2. **μ„λ²„**: μ—°κ²° μ„±κ³µ μ‹ `GAME_STATE_UPDATE` μ „μ†΅ (λ΅λΉ„ μƒνƒ)
3. **ν΄λΌμ΄μ–ΈνΈ**: ν”λ μ΄μ–΄ λ©λ΅ ν‘μ‹

### κ²μ„ μ‹μ‘ νλ¦„

1. **ν΄λΌμ΄μ–ΈνΈ**: κ²μ„ μ‹μ‘ μ”μ²­ (μ¶”κ°€ ν”„λ΅ν† μ½ ν•„μ” μ‹ ν‘μ)
2. **μ„λ²„**: `GAME_STATE_UPDATE` μ „μ†΅ (κ²μ„ μƒνƒ)
3. **ν΄λΌμ΄μ–ΈνΈ**: κ²μ„ ν™”λ©΄μΌλ΅ μ „ν™

### κ²μ„ μ§„ν–‰ νλ¦„

1. **ν΄λΌμ΄μ–ΈνΈ**: `PLAYER_ACTION` μ „μ†΅ (USE_CARD, END_TURN λ“±)
2. **μ„λ²„**: κ²μ„ λ΅μ§ μ²λ¦¬
3. **μ„λ²„**: `GAME_STATE_UPDATE` μ „μ†΅ (μ—…λ°μ΄νΈλ κ²μ„ μƒνƒ)
4. **ν΄λΌμ΄μ–ΈνΈ**: UI μλ™ μ—…λ°μ΄νΈ

---

## π§ ν…μ¤νΈ κ³„ν

### 1λ‹¨κ³„: κΈ°λ³Έ μ—°κ²° ν…μ¤νΈ
- [ ] WebSocket μ—°κ²° μ„±κ³µ ν™•μΈ
- [ ] μ—°κ²° μ‹¤ν¨ μ‹ μ—λ¬ λ©”μ‹μ§€ μμ‹  ν™•μΈ
- [ ] μ¬μ—°κ²° λ΅μ§ ν…μ¤νΈ

### 2λ‹¨κ³„: λ΅λΉ„ κΈ°λ¥ ν…μ¤νΈ
- [ ] λ΅λΉ„ μ°Έκ°€ ν›„ ν”λ μ΄μ–΄ λ©λ΅ μμ‹  ν™•μΈ
- [ ] μ—¬λ¬ ν”λ μ΄μ–΄ λ™μ‹ μ°Έκ°€ ν…μ¤νΈ
- [ ] κ²μ„ μ‹μ‘ κΈ°λ¥ ν…μ¤νΈ

### 3λ‹¨κ³„: κ²μ„ μ§„ν–‰ ν…μ¤νΈ
- [ ] GAME_STATE_UPDATE μμ‹  λ° UI μ—…λ°μ΄νΈ ν™•μΈ
- [ ] USE_CARD μ•΅μ… μ „μ†΅ λ° μ‘λ‹µ ν™•μΈ
- [ ] νƒ€κ²ν… μ‹μ¤ν… ν…μ¤νΈ
- [ ] END_TURN μ•΅μ… ν…μ¤νΈ
- [ ] RESPOND_ATTACK μ•΅μ… ν…μ¤νΈ

### 4λ‹¨κ³„: μ—λ¬ μ²λ¦¬ ν…μ¤νΈ
- [ ] μλ»λ μ•΅μ… μ „μ†΅ μ‹ μ—λ¬ μ‘λ‹µ ν™•μΈ
- [ ] λ„¤νΈμ›ν¬ λκΉ€ μ‹ μ¬μ—°κ²° ν…μ¤νΈ
- [ ] μ„λ²„ μ—λ¬ μ‘λ‹µ μ²λ¦¬ ν™•μΈ

---

## β“ ν‘μκ°€ ν•„μ”ν• μ‚¬ν•­

### 1. λ°© μƒμ„± λ° κ΄€λ¦¬
- **λ°© μƒμ„± ν”„λ΅ν† μ½**: λ°© μƒμ„±μ€ λ³„λ„ λ©”μ‹μ§€κ°€ ν•„μ”ν•κ°€μ”?
  - λ°© μƒμ„± μ‹ ν•„μ”ν• μµμ…: μµμ†/μµλ€ ν”λ μ΄μ–΄ μ, AI ν”λ μ΄μ–΄ μ, κ²μ„ λ¨λ“ λ“±
- **λ°© λ©λ΅ μ΅°ν**: μƒμ„±λ λ°© λ©λ΅μ„ μ΅°νν•λ” APIκ°€ ν•„μ”ν•κ°€μ”?
- **λ°© μƒμ„± μµμ…**: λ°© μƒμ„± μ‹ μ„¤μ • κ°€λ¥ν• μµμ…μ€ λ¬΄μ—‡μΈκ°€μ”?
  - μ: μµμ† ν”λ μ΄μ–΄ μ, μµλ€ ν”λ μ΄μ–΄ μ, AI ν”λ μ΄μ–΄ μ, κ²μ„ λ¨λ“ λ“±

### 2. AI ν”λ μ΄μ–΄ μ§€μ›
- **AI ν”λ μ΄μ–΄ μƒμ„±**: λ°© μƒμ„± μ‹ AI ν”λ μ΄μ–΄λ¥Ό μλ™μΌλ΅ μ¶”κ°€ν•  μ μλ‚μ”?
- **AI ν”λ μ΄μ–΄ μ‹λ³„**: GAME_STATE_UPDATEμ—μ„ AI ν”λ μ΄μ–΄λ¥Ό κµ¬λ¶„ν•  μ μλ” ν•„λ“κ°€ μλ‚μ”?
  - μ: `isBot: boolean` λλ” `playerType: 'human' | 'bot'`
- **AI ν”λ μ΄μ–΄ λ‚μ΄λ„**: AI ν”λ μ΄μ–΄μ λ‚μ΄λ„ μ„¤μ •μ΄ κ°€λ¥ν•κ°€μ”?

### 3. κ²μ„ μ‹μ‘ ν”„λ΅ν† μ½
- κ²μ„ μ‹μ‘μ€ λ³„λ„ λ©”μ‹μ§€κ°€ ν•„μ”ν•κ°€μ”?
- μ•„λ‹λ©΄ λ΅λΉ„μ—μ„ νΉμ • μ΅°κ±΄(ν”λ μ΄μ–΄ μ λ“±)μ΄ λ§μ΅±λλ©΄ μλ™μΌλ΅ μ‹μ‘λλ‚μ”?

### 4. ν”λ μ΄μ–΄ ID κ΄€λ¦¬
- λ΅λΉ„ μ°Έκ°€ μ‹ μ„λ²„μ—μ„ ν”λ μ΄μ–΄ IDλ¥Ό λ°κΈ‰ν•λ‚μ”?
- μ•„λ‹λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ κ³µν• playerNameμ„ IDλ΅ μ‚¬μ©ν•λ‚μ”?

### 5. ν•Έλ“ μΉ΄λ“ μ •λ³΄
- λ‹¤λ¥Έ ν”λ μ΄μ–΄μ ν•Έλ“ μΉ΄λ“λ” κ°μλ§ ν‘μ‹ν•΄μ•Ό ν•λ‚μ”?
- ν„μ¬ ν”λ μ΄μ–΄μ ν•Έλ“ μΉ΄λ“λ§ μ „μ²΄ μ •λ³΄λ¥Ό λ°›λ‚μ”?

### 6. νƒ€κ²ν… κ²€μ¦
- νƒ€κ²ν… κ°€λ¥ μ—¬λ¶€(μν–¥λ ¥ λ²”μ„)λ” μ„λ²„μ—μ„ κ²€μ¦ν•λ‚μ”?
- μ•„λ‹λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ κ²€μ¦ν•λ‚μ”?

### 7. ν„΄ νƒ€μ΄λ¨Έ
- ν„΄ νƒ€μ΄λ¨Έλ” μ„λ²„μ—μ„ κ΄€λ¦¬ν•λ‚μ”?
- `timeLeft`λ” μ„λ²„μ—μ„ μ£ΌκΈ°μ μΌλ΅ μ—…λ°μ΄νΈλλ‚μ”?

### 8. μ—λ¬ μ½”λ“
- μ—λ¬ λ©”μ‹μ§€μ— μ—λ¬ μ½”λ“λ¥Ό ν¬ν•¨ν•  μμ •μΈκ°€μ”?
- μ—λ¬ μ½”λ“λ³„ μ²λ¦¬ λ°©λ²•μ΄ μλ‚μ”?

### 9. κ²μ„ μ΄λ²¤νΈ λ΅κ·Έ
- κ²μ„ μ΄λ²¤νΈ λ΅κ·Έλ” μ„λ²„μ—μ„ μ „μ†΅ν•λ‚μ”?
- μ•„λ‹λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ©”μ‹μ§€λ¥Ό κΈ°λ°μΌλ΅ μƒμ„±ν•λ‚μ”?

---

## π“ μ¶”κ°€ μ”μ²­μ‚¬ν•­

### 1. κ°λ° ν™κ²½
- κ°λ° μ„λ²„ μ£Όμ† λ° ν¬νΈ: `ws://localhost:8080` (ν™•μΈ ν•„μ”)
- ν…μ¤νΈμ© κ²μ„ ID μƒμ„± λ°©λ²•

### 2. λ°© μƒμ„± κΈ°λ¥ (μ°μ„ μμ„ λ†’μ)
- **λ°© μƒμ„± API/λ©”μ‹μ§€**: λ°© μƒμ„±μ„ μ„ν• ν”„λ΅ν† μ½ μ •μ ν•„μ”
- **λ°© μƒμ„± μµμ…**: μ„¤μ • κ°€λ¥ν• μµμ… λ©λ΅ λ° κΈ°λ³Έκ°’
- **λ°© λ©λ΅ μ΅°ν**: μƒμ„±λ λ°© λ©λ΅ μ΅°ν λ°©λ²• (ν•„μ” μ‹)

### 3. AI ν”λ μ΄μ–΄ μ§€μ› (μ°μ„ μμ„ λ†’μ)
- **AI ν”λ μ΄μ–΄ μ‹λ³„**: GAME_STATE_UPDATEμ—μ„ AI ν”λ μ΄μ–΄ κµ¬λ¶„ ν•„λ“
- **AI ν”λ μ΄μ–΄ μƒμ„±**: λ°© μƒμ„± μ‹ AI ν”λ μ΄μ–΄ μλ™ μ¶”κ°€ λ°©λ²•
- **AI λ‚μ΄λ„ μ„¤μ •**: AI ν”λ μ΄μ–΄ λ‚μ΄λ„ μ„¤μ • λ°©λ²•

### 2. λ¬Έμ„ν™”
- WebSocket ν”„λ΅ν† μ½ μƒμ„Έ λ¬Έμ„ (κ°€λ¥ν•λ©΄)
- μ—λ¬ μ½”λ“ λ©λ΅ λ° μλ―Έ
- κ²μ„ κ·μΉ™ λ° μƒνƒ μ „μ΄ λ‹¤μ΄μ–΄κ·Έλ¨ (κ°€λ¥ν•λ©΄)

### 3. ν…μ¤νΈ μ§€μ›
- ν…μ¤νΈμ© λ”λ―Έ λ°μ΄ν„° λλ” μ‹λ‚λ¦¬μ¤
- AI ν”λ μ΄μ–΄ μ§€μ› μ—¬λ¶€ (ν…μ¤νΈ μ©μ΄μ„±)

---

## π“… μΌμ • μ μ•

1. **1μ£Όμ°¨**: κΈ°λ³Έ μ—°κ²° λ° λ΅λΉ„ κΈ°λ¥ ν…μ¤νΈ
2. **2μ£Όμ°¨**: κ²μ„ μ§„ν–‰ κΈ°λ¥ ν…μ¤νΈ
3. **3μ£Όμ°¨**: μ—λ¬ μ²λ¦¬ λ° μµμ ν™”

---

## π“ μ—°λ½μ²

ν”„λ΅ νΈμ—”λ“ λ‹΄λ‹Ήμ: [μ΄λ¦„]
μ΄λ©”μΌ: [μ΄λ©”μΌ]
μ—°λ½ κ°€λ¥ μ‹κ°„: [μ‹κ°„]

---

**κ°μ‚¬ν•©λ‹λ‹¤. μ›ν™ν• ν‘μ—…μ„ κΈ°λ€ν•κ² μµλ‹λ‹¤!**

---

## π“ μ²¨λ¶€ νμΌ

- ν”„λ΅ νΈμ—”λ“ ν”„λ΅μ νΈ κµ¬μ΅°: `docs/ledger-weight-front-end_OVERVIEW.md`
- WebSocket νƒ€μ… μ •μ: `src/infrastructure/websocket/types.ts`
- Domain Repository μΈν„°νμ΄μ¤: `src/domain/repositories/IWebSocketRepository.ts`

